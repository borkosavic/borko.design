---
import type { Project } from '../types/project';

interface Props {
  project: Project;
  isEven: boolean;
}

const { project, isEven }: Props = Astro.props;

const colorClasses = {
  belimo: {
    bg: 'bg-gradient-to-r from-orange-500 to-orange-700',
    border: 'border-orange-300',
    text: 'text-orange-600',
    hoverText: 'hover:text-orange-700',
  },
  sciprofiles: {
    bg: 'bg-gradient-to-r from-blue-500 to-blue-700',
    border: 'border-blue-300',
    text: 'text-blue-600',
    hoverText: 'hover:text-blue-700',
  },
  homerules: {
    bg: 'bg-gradient-to-r from-green-500 to-green-700',
    border: 'border-green-300',
    text: 'text-green-600',
    hoverText: 'hover:text-green-700',
  },
  fxtrading: {
    bg: 'bg-gradient-to-r from-indigo-500 to-indigo-700',
    border: 'border-indigo-300',
    text: 'text-indigo-600',
    hoverText: 'hover:text-indigo-700',
  },
  act2access: {
    bg: 'bg-gradient-to-r from-pink-500 to-pink-700',
    border: 'border-pink-300',
    text: 'text-pink-600',
    hoverText: 'hover:text-pink-700',
  },
};

const colorKey = project.color in colorClasses ? project.color : 'belimo';
const colors = colorClasses[colorKey];

// Import project image using Astro v5 asset pipeline
type ImageImport = typeof import('*.jpg');
let imageSrc = project.image;
let imageAsset: ImageImport | undefined = undefined;
try {
  imageAsset = await import(`../assets/${project.image}`);
  imageSrc = imageAsset.default.src;
} catch {}
---

<div class={`w-full py-24 ${colors.bg}`}>
  <div class="mx-auto max-w-container px-4 sm:px-6 lg:px-8">
    <div class={`grid gap-12 items-center lg:grid-cols-2 ${isEven ? 'lg:grid-flow-dense' : ''}`}>
      <div class={`${isEven ? 'lg:col-start-2' : ''}`}>
        <h3 class="text-3xl font-bold mb-4 text-white">{project.title}</h3>
        <p class="text-lg text-white/90 mb-6">{project.description}</p>
        <a
          href={`/projects/${project.slug}`}
          class={`inline-block px-6 py-3 ${colors.border} border-2 rounded-lg text-white bg-white/10 hover:bg-white/80 hover:text-black transition-standard`}
        >
          View Project
        </a>
      </div>
      <div class={`${isEven ? 'lg:col-start-1' : ''}`}>
        <img
          src={imageSrc}
          alt={project.title}
          class="w-full h-auto rounded-lg shadow-xl"
          loading="lazy"
        />
      </div>
    </div>
  </div>
</div>